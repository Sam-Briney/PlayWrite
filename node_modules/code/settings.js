var fs = require("fs");

var dir = process.execPath.split("\\");
var exe = dir[dir.length - 1];
dir.pop();
dir = dir.join("\\");

var path = dir + "/settings.json";

if(!fs.existsSync(path)){
	fs.writeFileSync(path, JSON.stringify({
		drawing: {
			straight: 1,
			curve: 3
		},
		player_name_display: "l"
	}));
}
var s = fs.readFileSync(path);
exports.app = JSON.parse(s);

exports.set = function(obj){
	exports.app = obj;
	fs.writeFileSync(path, JSON.stringify(obj));
}

if(!exports.app.hasOwnProperty("player_name_display")){
	exports.app.player_name_display = "l";
	exports.set(exports.app);
}