exports.project = function(project, exp){
	//sanitize project for version 1.0.0.0 fjles
	//from main.js
	if(!project.hasOwnProperty("players")){
		project.players = [];
	}
	for(ii=0; ii<project.frames.length; ii++){
		for(iii=0; iii<project.frames[ii].line_arr.length; iii++){
			if(!project.frames[ii].line_arr[iii].hasOwnProperty("player")){
				project.frames[ii].line_arr[iii].player = -1;
			}
		}
	}
	
	var found = false;
	
	outer: for(i=0; i<project.frames.length; i++){
		if(project.frames[i].name.search(exp) !== -1){
			found = true;
			break;
		}
		for(ii=0; ii<project.frames[i].text_boxes.length; ii++){
			if(project.frames[i].text_boxes[ii].text.search(exp) !== -1){
				found = true;
				break outer;
			}
		}
		for(ii=0; ii<project.frames[i].line_arr.length; ii++){
			if(project.frames[i].line_arr[ii].player > -1){
				if((project.players[project.frames[i].line_arr[ii].player].name.f + " " + project.players[project.frames[i].line_arr[ii].player].name.l).search(exp) !== -1){
					found = true;
					break outer;
				}
			}
		}
	}
	
	return found;
}

exports.current_project = function(project, exp){
	var results = [];
	
	outer: for(i=0; i<project.frames.length; i++){
		if(project.frames[i].name.search(exp) !== -1){
			results.push(i);
			continue;
		}
		for(ii=0; ii<project.frames[i].text_boxes.length; ii++){
			if(project.frames[i].text_boxes[ii].text.search(exp) !== -1){
				results.push(i);
				continue outer;
			}
		}
		for(ii=0; ii<project.frames[i].line_arr.length; ii++){
			if(project.frames[i].line_arr[ii].player > -1){
				if((project.players[project.frames[i].line_arr[ii].player].name.f + " " + project.players[project.frames[i].line_arr[ii].player].name.l).search(exp) !== -1){
					results.push(i);
					continue outer;
				}
			}
		}
	}
	
	return results;
}